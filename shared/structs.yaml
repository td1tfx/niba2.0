types:
  - &INT int
  - &STR std::string
  - &PROP property
  - &EQUIPTYPE equipmenttype

typedef:
  - name: &MAGICIDS magic_ids
    type: std::vector<int>
  - name: &EQUIPIDS equipment_ids
    type: std::vector<int>

structs:
  -
    name: &STAT battlestats
    fields: &STATSFIELDS
    # default type int, uninitialized
      - name: hp
        default: 0
      - name: mp
        default: 0
      - name: attack_min
        default: 0
      - name: attack_max
        default: 0
      - name: inner_power
        default: 0
      - name: accuracy
        default: 0
      - name: evasion
        default: 0
      - name: speed
        default: 0
      - name: defence
        default: 0
      - name: crit_chance
        default: 0
      - name: crit_damage
        default: 0
      - name: reduce_def
        default: 0
      - name: reduce_def_perc
        default: 0
      - name: hp_regen
        default: 0
      - name: mp_regen
        default: 0
      - name: gold_res
        default: 0
      - name: wood_res
        default: 0
      - name: water_res
        default: 0
      - name: fire_res
        default: 0
      - name: earth_res
        default: 0
      - name: hp_on_hit
        default: 0
      - name: hp_steal
        default: 0
      - name: mp_on_hit
        default: 0
      - name: mp_steal
        default: 0
    addition: true
  -
    name: &ATTR attributes
    fields:
      - name: strength
        default: 0
      - name: dexterity
        default: 0
      - name: physique
        default: 0
      - name: spirit
        default: 0
  -
    name: character
    fields:
      - name: name
        type: *STR
      - name: character_id
      - name: attrs
        type: *ATTR
      # yaml doesn't support array merging for no good reason
      # merge also create functions
      # - merge: *STATSFIELDS
      - name: stats
        type: *STAT
      - name: equipments
        type: *EQUIPIDS
      - name: active_magic
        type: *MAGICIDS
  -
    name: magic
    fields:
      - name: name
        type: *STR
      - name: magic_id
      - name: active
      - name: cd
      - name: multiplier
      - name: inner_damage
      - name: mp_cost
      - name: inner_property
        type: *PROP
      - name: stats
        type: *STAT
        default: ''
  -
    name: equipment
    fields:
      - name: equipment_id
      - name: name
        type: *STR
      - name: description
        type: *STR
      - name: type
        type: *EQUIPTYPE
      - name: stats
        type: *STAT
        default: ''
      - name: item_level
      - name: required_level